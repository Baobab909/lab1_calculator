# Лабораторная работа №1: Калькулятор (Вариант M2)

### Запуск программы
```bash
$ uv venv
$ python -m src.main
```


### Программа принимает математические выражения в инфиксной нотации через стандартный ввод. Поддерживаются:
* Числа: целые (42) и вещественные (3.14)
* Бинарные операции**: '+', '-', '*', '/', '//', '%', '**'
* Унарные операции: '+', '-' (обозначаются как 'u+' и 'u-')
* Скобки: '(' и ')' для группировки выражений

### Формат ввода
* Выражение вводится в инфиксной форме c пробелами
* Ограничения: // и % только для целых; деление на ноль — ошибка
* Доступны следующие операторы: +, -, *, /, //, %, **
* Преобразования выражения с учётом скобок
* Унарные операторы пишутся перед числом, берем их в скобки (Например: 8 * (-1))
* Нецелые числа можно записывать только через '.'
* Чтобы выйти из программы, надо ввести "end"

### Вывод ошибок
* Если идёт вещественное или целочисленное деление на ноль, то возвращаем "Нельзя делить на ноль"
* Если операторы // и % используются не только для целых, то возвращаем "Операция // допустима только для целых чисел" или "Операция % допустима только для целых чисел" соответственно
* Если % применяем с нулем, то возвращаем "Нельзя делить по модулю на ноль"
* Если была найдена операция не из списка, то выводим "Неизвестная операция: "
* Другие ошибки идут в ValueError и выводим "Ошибка при выполнении"


### Основной алгоритм:
* Токенизация входной строки
* Обработка унарных операторов
* Преобразование в RPN
* Вычисление RPN-выражения
* Форматирование и вывод результата


### Алгоритм сортировочной станции Дейкстры:
* Числа сразу добавляются в выходную очередь
* Операторы перемещаются в стек с учетом приоритетов
* Скобки используются для группировки операций
* В конце все операторы из стека перемещаются в выходную очередь


### Ограничения:
* Типы данных: программа работает только с целыми и вещественными числами
* Операции // и %: допустимы только для целых чисел
* Ошибки вычисления: обрабатываются с выводом понятных сообщений
* Ввод: поддерживается только текстовый ввод через стандартный поток
* Вывод: результаты форматируются для удобного отображения


### Функции
* isNumber(tok: str) -> bool - Проверяет, является ли токен числом
* isOp(tok: str) -> bool - Проверяет, является ли токен оператором
* getToken(expr: str) -> str - Извлекает следующий токен из строки выражения
* Operation(op: str, op1: int|float, op2=None) -> int|float - Выполняет математическую операцию над операндами. Исключения: ZeroDivisionError, TypeError, ValueError
* UnarOperators(tokens: list) -> list - Обрабатывает унарные операторы в списке токенов
* infix_to_postfix(expr: str) -> list - Преобразует инфиксное выражение в постфиксную запись
* Compute(postfix_tokens: list) -> list - Вычисляет выражение в постфиксной записи
* calc(expr: str) -> None - Основная функция вычисления выражения
* run() - Запускает интерактивный режим калькулятора


## Допущения
* Унарные операторы нужно ставить в скобки (Например: 5 * (-1))
* Нужно ставить пробелы между числами и операциями
* Дробные числа должны использовать точку (.) как разделитель
* Скобки () используются только для группировки, не поддерживаются другие виды скобок
* Неявное умножение (например, 2(3+4)) не поддерживается
* Вещественные числа выводятся без лишних нулей
* Поддерживается ввод только выражений с пробелами
* Реализована проверка корректности скобок
* Обработка специальных случаев (деление на ноль и т.д.)
